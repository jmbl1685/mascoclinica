!function(e){"use strict";angular.module("vcRecaptcha",[])}(),function(e){"use strict";e.module("vcRecaptcha").provider("vcRecaptchaService",function(){var t=this,n={};t.onLoadFunctionName="vcRecaptchaApiLoaded",t.setDefaults=function(t){e.copy(t,n)},t.setSiteKey=function(e){n.key=e},t.setTheme=function(e){n.theme=e},t.setStoken=function(e){n.stoken=e},t.setSize=function(e){n.size=e},t.setType=function(e){n.type=e},t.setLang=function(e){n.lang=e},t.setBadge=function(e){n.badge=e},t.setOnLoadFunctionName=function(e){t.onLoadFunctionName=e},t.$get=["$rootScope","$window","$q","$document","$interval",function(c,o,a,r,i){var s,u=a.defer(),d=u.promise,l={};o.vcRecaptchaApiLoadedCallback=o.vcRecaptchaApiLoadedCallback||[];var p=function(){s=o.grecaptcha,u.resolve(s)};function f(){if(!s)throw new Error("reCaptcha has not been loaded yet.")}function h(){return e.isFunction((o.grecaptcha||{}).render)}if(o.vcRecaptchaApiLoadedCallback.push(p),o[t.onLoadFunctionName]=function(){o.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},h())p();else if(o.document.querySelector('script[src^="https://www.google.com/recaptcha/api.js"]'))var g=i(function(){h()&&(i.cancel(g),p())},25);else{var y=o.document.createElement("script");y.async=!0,y.defer=!0,y.src="https://www.google.com/recaptcha/api.js?onload="+t.onLoadFunctionName+"&render=explicit",r.find("body")[0].appendChild(y)}return{create:function(e,t){return t.sitekey=t.key||n.key,t.theme=t.theme||n.theme,t.stoken=t.stoken||n.stoken,t.size=t.size||n.size,t.type=t.type||n.type,t.hl=t.lang||n.lang,t.badge=t.badge||n.badge,t.sitekey||function(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}(),(s?a.when(s):d).then(function(n){var c=n.render(e,t);return l[c]=e,c})},reload:function(e){f(),s.reset(e),c.$broadcast("reCaptchaReset",e)},execute:function(e){f(),s.execute(e)},useLang:function(e,t){var n=l[e];if(!n)throw new Error("reCaptcha Widget ID not exists",e);var c=n.querySelector("iframe");if(!t)return c&&c.src&&/[?&]hl=\w+/.test(c.src)?c.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(c&&c.src){var o=c.src;/[?&]hl=/.test(o)?o=o.replace(/([?&]hl=)\w+/,"$1"+t):o+=(-1===o.indexOf("?")?"?":"&")+"hl="+t,c.src=o}},getResponse:function(e){return f(),s.getResponse(e)},getInstance:function(e){return l[e]},destroy:function(e){delete l[e]}}}]})}(angular),function(e){"use strict";e.module("vcRecaptcha").directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(t,n,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",badge:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&",onError:"&"},link:function(o,a,r,i){o.widgetId=null,i&&e.isDefined(r.required)&&o.$watch("required",p);var s=o.$watch("key",function(t){c.create(a[0],{callback:function(e){n(function(){o.response=e,p(),o.onSuccess({response:e,widgetId:o.widgetId})})},key:t,stoken:o.stoken||r.stoken||null,theme:o.theme||r.theme||null,type:o.type||r.type||null,lang:o.lang||r.lang||null,tabindex:o.tabindex||r.tabindex||null,size:o.size||r.size||null,badge:o.badge||r.badge||null,"expired-callback":d,"error-callback":r.onError?l:void 0}).then(function(t){p(),o.widgetId=t,o.onCreate({widgetId:t}),o.$on("$destroy",u),o.$on("reCaptchaReset",function(n,c){(e.isUndefined(c)||t===c)&&(o.response="",p())})}),s()});function u(){i&&i.$setValidity("recaptcha",null),c.destroy(o.widgetId),e.element(t[0].querySelectorAll(".pls-container")).parent().remove()}function d(){n(function(){o.response="",p(),o.onExpire({widgetId:o.widgetId})})}function l(){var e=arguments;n(function(){o.response="",p(),o.onError({widgetId:o.widgetId,arguments:e})})}function p(){i&&i.$setValidity("recaptcha",!1===o.required?null:Boolean(o.response))}}}}])}(angular);